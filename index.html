        #computerBoard td {
            cursor: crosshair;
        }

        #computerBoard td:hover {
            background-color: #e1e1e1;
        }

        table.board td.planeHead1 {
            background-color: olive;
        }
        table.board td.planeBody1 {
            background-color: olivedrab;
        }
        table.board td.planeHead2 {
            background-color:chocolate;
        }
        table.board td.planeBody2 {
            background-color:coral;
        }
        table.board td.planeHead3 {
            background-color:darkgreen;
        }
        table.board td.planeBody3 {
            background-color:green;
        }

        .step2 {
            display: none
        }

        .selectedDirection {
            background-color: darkseagreen;
        }
    </style>
    <script>

        function drawGrid(planesPositions, gridClass, gridId) {
            var gridCode = "";
            gridCode += `
            <tr>
                <th></th>
                <th>A</th>
                <th>B</th>
                <th>C</th>
                <th>D</th>
                <th>E</th>
                <th>F</th>
                <th>G</th>
                <th>H</th>
                <th>I</th>
                <th>J</th>
            </tr>
            `;
            for (i = 1; i <= 10; i++) {
                gridCode += '<tr>';

                for (j = 1; j <= 10; j++) {
                    if (j == 1)
                        gridCode += '<th>' + i + '</th>';

                    if (planesPositions[i][j])
                        gridCode += '<td class="'+planesPositions[i][j]+'"></td>';
                    else
                        gridCode += '<td></td>';
                }

                gridCode += '</tr>';
            }

            $("#" + gridId).html(gridCode);
        }

        function computePlanes(myPlanesPositions, direction, j, i, plane) {
            var newBoard = {
                currentPlane: plane,
                myPlanesPositions: myPlanesPositions,
            };
            let newPlanePositions = Array(11).fill().map(() => Array(11).fill(0));

            switch(direction){
                case "leftArrow":
                    if (i>1 && i<10 && j<8){
                        newPlanePositions[i][j]     = "planeHead"+plane;
                        newPlanePositions[i-1][j+1] = "planeBody"+plane;
                        newPlanePositions[i][j+1]   = "planeBody"+plane;
                        newPlanePositions[i+1][j+1] = "planeBody"+plane;
                        newPlanePositions[i][j+2]   = "planeBody"+plane;
                        newPlanePositions[i-1][j+3] = "planeBody"+plane;
                        newPlanePositions[i][j+3]   = "planeBody"+plane;
                        newPlanePositions[i+1][j+3] = "planeBody"+plane;                        
                    } else {
                        console.log("nu se poate pune aici!");
                    }    
                break;
                case "rightArrow":
                    if (i>1 && i<10 && j>3){
                        newPlanePositions[i][j]     = "planeHead"+plane;
                        newPlanePositions[i-1][j-1] = "planeBody"+plane;
                        newPlanePositions[i][j-1]   = "planeBody"+plane;
                        newPlanePositions[i+1][j-1] = "planeBody"+plane;
                        newPlanePositions[i][j-2]   = "planeBody"+plane;
                        newPlanePositions[i-1][j-3] = "planeBody"+plane;
                        newPlanePositions[i][j-3]   = "planeBody"+plane;
                        newPlanePositions[i+1][j-3] = "planeBody"+plane;                        
                    } else {
                        console.log("nu se poate pune aici!");
                    }    
                break;
                case "upArrow":
                    if (j>1 && j<10 && i<8){
                        newPlanePositions[i][j]     = "planeHead"+plane;
                        newPlanePositions[i+1][j-1] = "planeBody"+plane;
                        newPlanePositions[i+1][j]   = "planeBody"+plane;
                        newPlanePositions[i+1][j+1] = "planeBody"+plane;
                        newPlanePositions[i+2][j]   = "planeBody"+plane;
                        newPlanePositions[i+3][j-1] = "planeBody"+plane;
                        newPlanePositions[i+3][j]   = "planeBody"+plane;
                        newPlanePositions[i+3][j+1] = "planeBody"+plane;                        
                    } else {
                        console.log("nu se poate pune aici!");
                    }
                break;
                case "downArrow":
                    if (j>1 && j<10 && i>3){
                        newPlanePositions[i][j]     = "planeHead"+plane;
                        newPlanePositions[i-1][j-1] = "planeBody"+plane;
                        newPlanePositions[i-1][j]   = "planeBody"+plane;
                        newPlanePositions[i-1][j+1] = "planeBody"+plane;
                        newPlanePositions[i-2][j]   = "planeBody"+plane;
                        newPlanePositions[i-3][j-1] = "planeBody"+plane;
                        newPlanePositions[i-3][j]   = "planeBody"+plane;
                        newPlanePositions[i-3][j+1] = "planeBody"+plane; 
                    } else {
                        console.log("nu se poate pune aici!");
                    }
                break;
            }
            var collision = checkColision(myPlanesPositions,newPlanePositions);
            
            if (collision){
                console.log("se suprapun avioanele");
            } else {    
                for(i=1;i<=10;i++)
                    for(j=1;j<=10;j++)
                        if (newPlanePositions[i][j])
                            myPlanesPositions[i][j] = newPlanePositions[i][j];
                newBoard.currentPlane++;
            }

            if (newBoard.currentPlane<=3){
                $("#currentPlaneTitle").html("Place plane <span>"+ newBoard.currentPlane + "</span> on the board");
            }
            //console.log(i + " " + j + ", plane :" + plane);

            return newBoard;
        }

        function checkColision(myPlanesPositions,newPlanePositions){
            var i=0, j=0;
            for(i=1;i<=10;i++)
                for(j=1;j<=10;j++)
                    if (newPlanePositions[i][j]&&myPlanesPositions[i][j])
                        return true;
            return false;
        }

        $(document).ready(function () {
            //initialize array with 0 
            var plane = 1;
            let myPlanesPositions = Array(11).fill().map(() => Array(11).fill(0));
            let computerPlanesPositions = Array(11).fill().map(() => Array(11).fill(0));
            drawGrid(myPlanesPositions, "board", "myEmptyBoard");

            //trebuie delegat evenimentul click pe celule (td-uri), pentru ca sunt dinamice (se sterg si se recreaza)
            $('#myEmptyBoard').on('click', "td", function () {
                if (plane <= 3) {
                    var col = $(this).index(),
                        row = $(this).parent().index();
                    //console.log("col index:" + col + ", row index :" + row);

                    var planeDirection = $(".selectedDirection").attr("id");
                    //console.log(planeDirection);

                    newBoard = computePlanes(myPlanesPositions, planeDirection, col, row, plane);
                    myPlanesPositions = newBoard.myPlanesPositions;
                    plane = newBoard.currentPlane;
                    drawGrid(myPlanesPositions, "board", "myEmptyBoard");
                }
            });

            drawGrid(myPlanesPositions, "board", "myBoard");
            drawGrid(computerPlanesPositions, "board", "computerBoard");

            $("#continueButton").click(function () {
                $(".step1").fadeOut(500, function () {
                    $(".step2").fadeIn(500);
                });

            });
            $("#backButton").click(function () {
                $(".step2").fadeOut(500, function () {
                    $(".step1").fadeIn(500);
                });
            });
            $(".directionSelector").click(function () {
                $(".directionSelector").removeClass("selectedDirection");
                $(this).addClass("selectedDirection");
            });
        });
    </script>
</head>

<body>
    <div class="container">
        <h1 class="text-center">Planes</h1>

        <div class="step1">
            <h2 class="text-center">Step 1 - configure my board</h2>
            <div class="row">
                <div class="col-sm-6">
                    <h3>My Board</h3>
                    <table class="board" id="myEmptyBoard">
                    </table>
                </div>
                <div class="col-sm-6">
                    <h3 id="currentPlaneTitle">Place plane <span>1</span> on the board</h3>
                    <table>
                        <tr>
                            <td></td>
                            <td><button class="directionSelector selectedDirection" id="upArrow">&uarr;</button></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><button class="directionSelector" id="leftArrow">&larr;</button></td>
                            <td></td>
                            <td><button class="directionSelector" id="rightArrow">&rarr;</button></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><button class="directionSelector" id="downArrow">&darr;</button></td>
                            <td></td>
                        </tr>
                    </table>
                    <p>&nbsp;</p>
                    <button type="button" id="continueButton">Continue</button>
                </div>
            </div>
        </div>

        <div class="step2">
            <h2 class="text-center step2">Step 2 - Play with the computer</h2>

            <div class="col-sm-6">
                <h3>My board</h3>
                <table class="board" id="myBoard">
                </table>
            </div>
            <div class="col-sm-6">
                <h3>Computer</h3>
                <table class="board" id="computerBoard">
                </table>
                <p>&nbsp;</p>
                <button type="button" id="backButton">Back</button>
            </div>
        </div>
    </div>
</body>

</html>
